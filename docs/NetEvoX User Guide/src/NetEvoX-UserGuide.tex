\documentclass[a4paper, 11pt]{article}

% Document metadata
\usepackage[pdftex,
            pdfauthor={Thomas Gorochowski, Mario di Bernardo, Claire Grierson},
            pdftitle={NetEvo: A computational framework for the evolution of dynamical complex networks},
            pdfkeywords={Complexity, Evolution, Dynamics},
            pdfsubject={Network Evolution},
            pdfcreator={LaTeX, TextMate and Mac OS X}]{hyperref}

% Some packages required
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{authblk}
\usepackage{abstract}
\usepackage{caption}
\usepackage{palatino}
\usepackage{listings}
\usepackage{color}
\usepackage{hyperref}
\usepackage{fancyvrb,relsize}
\usepackage{longtable}

% Page layout
\pdfpagewidth   8.5in
\pdfpageheight  11in
\topmargin      0.0in
\headheight     0.0in
\headsep        0.25in
\textheight     8.9in
\textwidth      6.4in
\oddsidemargin  0in
\evensidemargin 0in

% Change caption sizes
\renewcommand{\captionlabelfont}{\small}
\renewcommand{\captionfont}{\small}

\newcommand{\guitxt}[1]{{\textbf{\textsf{\small{#1}}}}}

% Use more intelligent figure placement
\renewcommand\floatpagefraction{.9}
\renewcommand\topfraction{.9}
\renewcommand\bottomfraction{.9}
\renewcommand\textfraction{.1}   
\setcounter{totalnumber}{50}
\setcounter{topnumber}{50}
\setcounter{bottomnumber}{50}

% Only include sections and subsections in TOCs
\setcounter{tocdepth}{3}

\begin{document}

% Create the title page =========
% \fontsize{7}{9}\selectfont
\renewcommand\Affilfont{\itshape\fontsize{9}{11}\selectfont}
\title{\vspace{-1.2cm}\fontsize{22}{26}\selectfont\includegraphics[width=4.5cm]{./Figures/NetEvoX.pdf} \\ NetEvoX -- User Guide \\ \vspace{0.2cm} \fontsize{14}{16}\selectfont Version 1.1}
\author[1]{Thomas E. Gorochowski}
\affil[1]{Bristol Centre for Complexity Sciences, Department of Engineering Mathematics, University of Bristol, Bristol, BS8 1TR, UK}
\date{~\vspace{-1.0cm}}
\maketitle
\tableofcontents
\newpage

%==============================================================================
\section{Introduction}
%==============================================================================

\subsection{Overview}
NetEvoX is an application designed to allow for the visualisation of dynamical evolving networks and provides the following facilities:
\begin{enumerate}
	\item Automatic layout of undirected networks using an adapted force-directed method;
	\item Animated node and edge dynamics;
	\item Animated network evolution (removal and addition of nodes and edges);
	\item Customisable positions and colours of nodes and edges, if required.
\end{enumerate}
It is a companion program to NetEvo\footnote{See \url{http://www.netevo.org} for further details about this project.} and is able to use standard network dynamics and evolution data generated by this library. To allow for interoperability with other applications, NetEvoX uses a text-based format described in Section \ref{sec:fileFormat}.

\subsection{Installation and System Requirements}
To install the software, copy the \guitxt{NetEvoX} application file from the installation disk image to your \guitxt{Applications} folder, or the location you would like it to reside. Everything is self-contained within this file and no additional configuration is required. To run this software a minimum of the following configuration is required:
\begin{itemize}
	\item Intel or PowerPC Macintosh computer (800Mhz or faster)
	\item Mac OS X 10.5 (Leopard) or later
\end{itemize}
Note: Due to visualisations making heavy use of OpenGL, for large networks we recommend computers with dedicated graphics cards.

\subsection{Getting Involved}
If you would like to assist with development, test the latest beta releases or help in other ways with NetEvoX contact us at \texttt{develop@netevo.org}. For latest news on new releases see the project website or follow us on Twitter \texttt{@netevo}.

\subsection{License}
NetEvoX is open-source software released under the Open Source Initiative (OSI) approved Non-Profit Open Software License ("Non-Profit OSL") 3.0. This allows for source code to be downloaded, adapted and distributed (with appropriate licensing) for non-profit uses. See the \texttt{LICENCE.txt} file included with the source distribution for full details.

\subsection*{Acknowledgements}
TEG acknowledges the support of EPSRC grant EP/5011214.

%==============================================================================
\section{NetEvoX}
%==============================================================================

\subsection{Getting Started}
NetEvoX provides a minimalist user interface in which to load and visualise dynamic and evolving networks. It consists of two main aspects, (i) the visualisation window and (ii) application toolbox. The visualisation window displays the current network and is a direct representation of any images or movies that are recorded. All user input is via the application toolbox. This gives access to all the main functions of the software providing options to load, customise, play and record visualisations. The following sections outline how each of these options are used.

\subsection{Loading Files}
To load a new network, select \guitxt{Open Network File...} from the application toolbox and choose the required file. This must be in a suitable format (see Section \ref{sec:fileFormat}) and have a \texttt{.nex} extension. Playback will not begin until the \guitxt{Play} button is pressed.

\subsection{Customising Playback}
Visualisation can be customised in several ways by options found on the application toolbox under the \guitxt{Edit Layout...} option. These include:
\begin{itemize}
	\item \textbf{Default Colours} -- Users can specify particular background, node and edge colours to be used by default. If the visualisation uses manually specified colours these options will be ignored.
	\item \textbf{Speed of Evolution and Dynamics} -- Delays of animation speed for network dynamics and evolution to be varied as required using the text boxes on main toolbox. Making changes to these speeds during playback will override any custom settings in the network file and the enter key must be pressed for the new delay to be used.
	\item \textbf{Node Spacing} -- To enable easier viewing node spacing can be altered as required and will be applied proportionally between all nodes. Making changes to this setting during playback will override any custom settings in the network file.
	\item \textbf{Visualisation Style} -- The built in visualisation algorithm provides several different styles to alter the layout and visual appearance of the network:
	\begin{enumerate}
		\item \textit{Standard} -- Displays networks using the user specified options in the application toolbox or network file. Layout is performed using ageing which ensures elements that have not seen change for a long period of time remain relatively fixed in space. This helps to minimise the changes occurring during a visualisation and improves clarity.
		\item \textit{Opacity Ageing} -- Performs the same layout as standard, however, uses ageing information to influence the opacity of nodes and edges, i.e. elements fade as they remain unchanged over evolutionary time. This helps to highlight areas that are undergoing extensive change.
		\item \textit{Blended Ageing} -- Performs the same layout as standard, however, uses ageing information to influence the colour of nodes and edges. Unlike opacity ageing, blended ageing uses two user specified colours (one for new elements, one for old elements) to find an appropriate colour depending on the age of an element. This provides additional flexibility to the user when deciding on how the ageing information should be displayed.
		\item \textit{No Ageing} -- Elements are rendered in the same way as the standard style, however, the layout is based on a pure force-directed method and does not use ageing information to influence the movement of nodes. This style has been included to allow for a comparison to an age based layout.
	\end{enumerate}
\end{itemize}

\subsection{Saving Output}

\subsubsection{Images}
An image of the current visualisation window can be saved at any point by selecting \guitxt{File} $\rightarrow$ \guitxt{Save~As...} from the application menu. Images are saved in an uncompressed TIFF format.

\subsubsection{Vector Graphics}
If you require high quality vector based output then an EPS formatted file can be generated of the current frame by selecting the \guitxt{Export to EPS...} button and entering the new filename. EPS files generated by NetEvoX do not support transparency and so this will be ignored during output.

\subsubsection{Movies}
To save animated movies of a visualisation, at any point click \guitxt{Start~Recording...} from the application toolbox and enter the new file name. All changes to the visualisation will be recorded to this file until the \guitxt{Stop~Recording} button is pressed. Movies are stored in a compressed MPEG-4 format at the resolution of the visualisation window when the recording began. It is recommended that the visualisation window is not resized during a recording as this may lead to undesired artefacts in the resultant file.

%==============================================================================
\section{\label{sec:fileFormat}File Format}
%==============================================================================

\subsection{General Structure}

NetEvoX uses a simple text-based file format for input. To be recognised by the application all files should have the \texttt{.nex} extension. Files are interpreted as a stream of commands each on a new line and grouped into frames, either dynamic or evolutionary, that are executed together as a single block. Commands describe changes occurring to the network model and fall into 3 main categories:
\begin{enumerate}
	\item \textbf{Administration} -- Allows for properties of the visualisation, the end of a frame and other configuration options to be set.
	
	\item \textbf{Network Topology} -- Nodes and edges can be added and removed as required as the network evolves.
	
	\item \textbf{Network Dynamics} -- Nodes and edges have a single state value that influences the way they are rendered to the screen. For example, states might correspond to the current radius of a node or width of an edge. Commands exist to set these individually, or as a complete set of state values for all nodes and edges.
\end{enumerate}
Note: Commands must not contain any trailing spaces. These may be interpreted incorrectly and cause the system to ignore the particular command.

\subsection{Command Reference}

The following sections outline the full set of commands that can be interpreted by NetEvoX. Standard notion for necessary \texttt{<arg>} and optional \texttt{[arg]} arguments is used. All nodes are numbered from 0 as they are created and a deletion causes renumbering of any later nodes.

\subsubsection{Administration}
\begin{description}
\item[\small\texttt{LAYOUT-CUSTOM}] ~\\Use manually specified node positions (turn off default automatic layout).

\item[\small\texttt{NODE-COLOURS-CUSTOM}] ~\\Use manually specified colours for nodes.

\item[\small\texttt{EDGE-COLOURS-CUSTOM}] ~\\Use manually specified colours for edges.

\item[\small\texttt{-}] ~\\End of network dynamics frame.

\item[\small\texttt{--}] ~\\End of network evolution frame.

\item[\small\texttt{T-,<millisecs>}] ~\\Set wait time in milliseconds for the end of each network dynamics frame.

\item[\small\texttt{T--,<millisecs>}] ~\\Set wait time in milliseconds for the end of each network evolution frame.
\end{description}

\subsubsection{Network Topology}
\begin{description}
\item[\small\texttt{N+,[x],[y],[z],[state],[r],[g],[b],[alpha]}] ~\\Add new node with optional position, state, and colour.

\item[\small\texttt{N-,<node>}] ~\\Remove node.

\item[\small\texttt{E+,<node1>,<node2>,[state],[r],[g],[b],[alpha]}] ~\\Add new edge between two nodes with optional state and colour.

\item[\small\texttt{E-,<node1>,<node2>}] ~\\Remove edge between two nodes.
\end{description}

\subsubsection{Network Dynamics}
\begin{description}
\item[\small\texttt{NS1,<node>,<state>}] ~\\Update a single node state.

\item[\small\texttt{NS,<state1>,<state2>,...,<stateN>}] ~\\Update all node states.

\item[\small\texttt{ES1,<node1>,<node2>,<state>}] ~\\Update a single edge state.

\item[\small\texttt{NP,<node>,<x>,<y>,<z>}] ~\\Set node position.

\item[\small\texttt{NC,<node>,<r>,<g>,<b>,<alpha>}] ~\\Set node colour.

\item[\small\texttt{EC,<node1>,<node2>,<r>,<g>,<b>,<alpha>}] ~\\Set edge colour.
\end{description}

\subsection{Example Files}

To illustrate how these commands are used, the following sections describe some examples.

\subsubsection{Network Creation and Evolution}
This displays the simple evolution of a network topology from a ring to a star. The end of each evolutionary frame is given by the \texttt{--} command.\\~\\

\begin{Verbatim}[fontsize=\relsize{-1.2},frame=single,commandchars=\\\{\}]
 N+
 N+
 N+
 N+
 N+
 N+
 E+,0,1
 E+,1,2
 E+,2,3
 E+,3,4
 E+,4,5
 E+,5,0
 --
 E-,1,2
 E+,0,2
 --
 E-,2,3
 E+,0,3
 --
 E-,3,4
 E+,0,4
 --
 E-,4,5
 E+,0,5
 --
\end{Verbatim}

\subsubsection{Network Dynamics}
Illustrates node and edge dynamics in a ring network of four nodes. We also alter the delay for dynamics using the administrative \texttt{T-} command. It is worth noticing that states retain their value between dynamic frames and need only be set when changes occur.

\begin{Verbatim}[fontsize=\relsize{-1.2},frame=single,commandchars=\\\{\}]
N+
N+
N+
N+
E+,0,1
E+,1,2
E+,2,3
E+,3,0
ES1,0,1,1.0
ES1,1,2,2.0
ES1,2,3,3.0
ES1,3,0,4.0
NS,0.1,0.2,0.3,0.4
T-,80
--
NS,0.2,0.3,0.4,0.5
-
NS,0.3,0.4,0.5,0.6
-
ES1,0,1,5.0
ES1,1,2,7.0
ES1,2,3,9.0
ES1,3,0,11.0
NS,0.4,0.5,0.6,0.7
-
NS,0.5,0.6,0.7,0.8
-
NS,0.6,0.7,0.8,0.9
-
NS,0.7,0.8,0.9,1.0
-
NS,0.8,0.9,1.0,0.9
-
NS,0.9,1.0,0.9,0.8
-
NS,0.9,0.8,0.7,0.6
-
ES1,0,1,4.0
ES1,1,2,6.0
ES1,2,3,8.0
ES1,3,0,10.0
NS,0.8,0.7,0.6,0.5
-
ES1,0,1,3.0
ES1,1,2,5.0
ES1,2,3,7.0
ES1,3,0,9.0
NS,0.7,0.6,0.5,0.4
-
ES1,0,1,2.0
ES1,1,2,4.0
ES1,2,3,6.0
ES1,3,0,8.0
NS,0.6,0.5,0.4,0.3
-
\end{Verbatim}

\subsubsection{Custom Layout and Colours}
This creates a ring network of four nodes with custom position and colours for both nodes and edges. To allow for custom positions and colours the administrative commands at the beginning of the file are required.

\begin{Verbatim}[fontsize=\relsize{-1.2},frame=single,commandchars=\\\{\}]
 LAYOUT-CUSTOM
 NODE-COLOURS-CUSTOM
 EDGE-COLOURS-CUSTOM
 N+
 N+
 N+
 N+
 E+,0,1
 E+,1,2
 E+,2,3 
 E+,3,0
 NP,0,0,0,0
 NP,1,60,0,0
 NP,2,60,60,0
 NP,3,0,60,0
 NC,0,0,0,0,255
 NC,1,255,0,0,255
 NC,2,0,255,0,255
 NC,3,0,0,255,255
 EC,0,1,0,0,0,255
 EC,1,2,255,0,0,255
 EC,2,3,0,255,0,255
 EC,3,0,0,0,255,255
 --
\end{Verbatim}

\end{document}
